{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.todo-list');\nexport default function createMarkup(images){\n  const markup = images\n    .map(\n        ({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return  `<li class=\"photo-main-list\">\n            <a class=\"galery-link\"  href=\"${largeImageURL}\">\n            <img class=\"photo\" width=\"360\" height=\"200\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n              <ul class='list-menu'>\n                <li class='description'>\n                  <h3 class='title'>Likes</h3>\n                  <p class='datas'>${likes}</p>\n                </li>\n                <li class='description'>\n                  <h3 class='title'>Views</h3>\n                  <p class='datas'>${views}</p>\n                </li>\n                <li class='description'>\n                  <h3 class='title'>Comments</h3>\n                  <p class='datas'>${comments}</p>\n                </li>\n                <li class='description'>\n                  <h3 class='title'>Downloads</h3>\n                  <p class='datas'>${downloads}</p>\n                </li>\n              </ul>\n            </li>`;\n        }\n    )\n    .join('');\n    list.insertAdjacentHTML('beforeend', markup)\n}\n\n","\nimport axios from 'axios';\n\nconst KEY = '42676723-0286cb816b5743467714b50d3';\nconst BASE_URI = 'https://pixabay.com/api/';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal'\nconst SAFESEARCH = 'true';\n\nexport default async function  getImages(query, amount, page){\n    const QUERY = query.trim();\n    const LINK = `${BASE_URI}?key=${KEY}&q=${QUERY}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&per_page=${amount}&page=${page}`;\n        \n    try {\n        const response = await axios.get(LINK);\n        if (response.status !== 200 ) {\n            throw new Error(response.status);\n        }\n        return response.data;\n    } catch (error) {\n        throw new Error(`Error fetching images: ${error.message}`);\n    }\n\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport createMarkup from './js/render-functions';\nimport getImages from \"./js/pixabay-api\";\n\nconst list = document.querySelector('.todo-list');\nconst input = document.querySelector('.input-text');\nconst form = document.querySelector('.main-form');\nconst load = document.querySelector('.loader');\n\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\nlet currentPage = 1;\nlet currentQuery;\n\nload.style.display = 'none';\n\nconst lightbox = new SimpleLightbox('.todo-list a.galery-link', {\n    captionsData: 'alt',\n    captionDelay: 500,\n});\n\nform.addEventListener('submit', async function handler(event) {\n    event.preventDefault();\n    const query = input.value;\n    list.innerHTML = '';\n    input.value = '';\n    loadMoreBtn.style.display = 'none';//\n    try {\n        const data = await getImages( query, 15, 1);\n        if( data.hits.length === 0){\n            list.innerHTML = '';\n            load.style.display = 'none';\n            loadMoreBtn.classList.add('is-hidden');\n            return iziToast.error({\n                      message: `Sorry, there are no images matching your search query. Please try again!`,\n                      position: 'topCenter',  \n                  });\n            // loadMoreBtn.style.display = 'none';\n        }\n        else{\n            createMarkup(data.hits);\n            lightbox.refresh();\n            currentQuery = query;\n            currentPage = 1;\n            load.style.display = 'none';\n            if(data.hits.length < 15 ){\n                // loadMoreBtn.style.display = 'none';\n                handlerErrorResult();\n            }\n            else{\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    }\n    catch(error){\n        console.error(error);\n    }\n});\n\n\nloadMoreBtn.addEventListener('click', async function loadImages(event) {\n  event.preventDefault();\n  list.insertAdjacentElement('afterend', load);\n  load.style.display = 'inline-block';\n  currentPage++;\n\n  try {\n      const data = await getImages(currentQuery, 15, currentPage);\n\n      if (data.hits.length === 0) {\n          loadMoreBtn.style.display = 'none';\n          return handlerErrorResult();\n          \n      } else {\n          createMarkup(data.hits);\n          lightbox.refresh();\n          const boxFotos = list;\n          load.style.display = 'none';\n\n          const rect = boxFotos.getBoundingClientRect().height;\n          window.scrollBy({\n              top: rect * 2,\n              behavior: \"smooth\",\n          });\n\n          if (data.hits.length < 15) {\n              loadMoreBtn.style.display = 'none';\n              handlerErrorResult();\n          } else {\n              loadMoreBtn.style.display = 'block';\n          }\n      }\n  } catch (error) {\n      console.error(error);\n      handlerErrorResult();\n  }\n});\nfunction handlerErrorResult() {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topCenter',\n    });\n    loadMoreBtn.style.display = 'none';\n    load.style.display = 'none';\n  }"],"names":["list","createMarkup","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","KEY","BASE_URI","IMAGE_TYPE","ORIENTATION","SAFESEARCH","getImages","query","amount","page","QUERY","LINK","response","axios","error","input","form","load","loadMoreBtn","currentPage","currentQuery","lightbox","SimpleLightbox","event","data","iziToast","handlerErrorResult","boxFotos","rect"],"mappings":"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"}